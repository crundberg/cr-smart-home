{"name":"CR Smart Home","tagline":"A Raspberry Pi home automation project","body":"# CR Smart Home\r\nA Raspberry Pi home automation project to control Nexa remote switch.\r\n\r\n## Features\r\n- Control lamps manually via API or with schedule\r\n- Connect sensors to log temperature and humidity\r\n- Get sunset/sunrise for your city\r\n- Get weather from OpenWeatherMap\r\n\r\n## Hardware\r\n- Raspberry Pi\r\n- RF Transmitter and Receiver 433 MHz ([Like this one](http://www.kjell.com/se/sortiment/el/elektronik/fjarrstyrning/sandar-och-mottagarmodul-433-mhz-p88905))\r\n\r\n## Wiring\r\nHere's a wiring example for a Raspberry Pi 2\r\n\r\n![Wiring](http://www.crundberg.se/wp-content/uploads/2015/12/Breadboard.png)\r\n\r\n## Install\r\n\r\n### Preparations\r\nIf you install CR Smart Home on your Raspberry Pi you'll need to extend the swap file from 100 to 300 during the installation. I recommend to change back when the installation is done.\r\n```\r\nsudo nano /etc/dphys-swapfile\r\nCONF_SWAPSIZE=300\r\nsudo /etc/init.d/dphys-swapfile stop\r\nsudo /etc/init.d/dphys-swapfile start\r\n```\r\n\r\n### Install required packages\r\nInstall the following packages. The packages pi_switch and pi-switch-python takes a while to install, please be patient.\r\n```\r\nsudo apt-get update\r\nsudo apt-get install mysql-server\r\nsudo apt-get install python-mysqldb\r\nsudo apt-get install apache2\r\nsudo apt-get install php5 php5-curl php5-mysql libapache2-mod-php5\r\nsudo apt-get install python-dev libboost-python-dev python-pip\r\nsudo apt-get install build-essential python-openssl\r\nsudo apt-get install python-w1thermsensor\r\nsudo pip install Flask\r\nsudo pip install flask-httpauth\r\n\r\ncd /home/pi/Documents\r\ngit clone git://git.drogon.net/wiringPi\r\ncd wiringPi\r\n./build\r\n\r\ncd /home/pi/Documents\r\ngit clone https://github.com/lexruee/pi-switch-python.git\r\ncd pi-switch-python\r\nsudo python setup.py install\r\n\r\ncd /home/pi/Documents\r\ngit clone https://github.com/adafruit/Adafruit_Python_DHT.git\r\ncd Adafruit_Python_DHT\r\nsudo python setup.py install\r\n```\r\n\r\n### Configure webserver\r\nOpen configuration file for Apache\r\n`sudo nano /etc/apache2/sites-available/000-default.conf`\r\n\r\nFind the row `DocumentRoot /var/www` and replace it with `DocumentRoot /home/pi/Documents/cr-smart-home-webgui`.\r\nAlso add the following code.\r\n\r\n```\r\n<Directory /home/pi/Documents/cr-smart-home-webgui/ >\r\n  Options Indexes FollowSymLinks\r\n  AllowOverride None\r\n  Require all granted\r\n</Directory>\r\n```\r\n\r\nRestart Apache with `sudo /etc/init.d/apache2 restart`\r\n\r\n### Install Home-Automation\r\n```\r\ncd /home/pi/Documents\r\ngit clone https://github.com/crundberg/cr-smart-home\r\ngit clone https://github.com/crundberg/cr-smart-home-webgui\r\n\r\n# Import MySQL database\r\nmysql -u root -p mysql < /home/pi/Documents/cr-smart-home/crsmarthome.sql\r\n```\r\n\r\n## Start program\r\n\r\n### Start manually\r\nStart the program with `sudo python /home/pi/Documents/cr-smart-home/main.py` and start the API with `sudo python /home/pi/Documents/cr-smart-home/API.py`\r\n\r\n### Autostart\r\n```\r\nsudo cp /home/pi/Documents/cr-smart-home/autostart/crsmarthome /etc/init.d/\r\nsudo chmod +x /etc/init.d/crsmarthome\r\nsudo update-rc.d crsmarthome defaults\r\n```\r\n\r\n### Use it!\r\nGo to `http://your-raspberry-ip/`. Log in with username `admin` and password `admin123`.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}